<!DOCTYPE html>

<head>
	<link rel="shortcut icon" type="image/jpg" href="static/images/favicon.ico"/>
	<meta charset="utf-8">
    <meta name="description" content="">
    <title>AV Club Grades</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="static/css/bootstrap.min.css">
    <!-- jQuery UI CSS -->
    <script src="static/js/jquery.min.js"></script>
    <link rel="stylesheet" href="static/css/jquery-ui.min.css">
    <link rel="stylesheet" href="static/css/jquery-ui.structure.min.css">
    <link rel="stylesheet" href="static/css/jquery-ui.theme.min.css">
    <link rel="stylesheet" href="static/css/d3-tip.css">
    <link rel="stylesheet" href="/static/css/fstdropdown.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" type="text/css" href="static/css/style.css">                               
</head>


<body>
    <div class="spacer"></div>

    <div class="container">
        <div class="col-md-2"></div>
        <div class="col-md-8" style="text-align: center;">
            <h1>
                AV Club Reviews
            </h1>
            <div class="spacer"></div>
            <div id="intro-text" style="text-align: left">
                <p>
                    The AV Club has published over 16,000 TV reviews since 2007, assigning each reviewed episode a letter grade (from A to F).
                    What shows does AV Club like or dislike? Which do they like more than other reviewers? Do they like certain kinds of shows?
                    Directors? Are some reviewers easier graders than others?
                </p>
                <p>
                    I decided to try to find out by scraping the review data by their site. I matched it up with IMDB data, which
                    had more informatino about directors, actors, air-dates and genre classifications, as well as community ratings
                    to use as benchmarks.
                </p>
                <p>
                    Below are some visualzations for exploring or analyzing AV Club Review data by show, episode, director, genre, or reviewer.
                    I've included some findings at the top of each ssection as well
                </p>
            </div>
        </div>
        <div class="col-md-2"></div>
    </div>

    <div class="spacer"></div>

    <div id="section-select">
        <div class="btn-group btn-group-toggle" data-toggle="buttons">
            <label class="btn btn-secondary bootstrap-button-toggle active">
                <input type="radio" name="section-select" value="shows" id="shows_button" autocomplete="off" checked>Shows
            </label>
            <label class="btn btn-secondary bootstrap-button-toggle">
                <input type="radio" name="section-select" value="seasons" id="seasons_button" autocomplete="off">Seasons/Episodes
            </label>
            <label class="btn btn-secondary bootstrap-button-toggle">
                <input type="radio" name="section-select" value="genres" id="genres_button" autocomplete="off">Genres
            </label>
            <label class="btn btn-secondary bootstrap-button-toggle">
                <input type="radio" name="section-select" value="directors" id="directors_button" autocomplete="off">Directors
            </label>
            <label class="btn btn-secondary bootstrap-button-toggle">
                <input type="radio" name="section-select" value="reviewers" id="reviewers_button" autocomplete="off">Reviewers
            </label>
        </div>
    </div>

    <div class="spacer"></div>

	<!-- Bootstrap grid setup -->
    <div class="container" style="margin-top: 20px">
        <div id="shows-wrapper" class="section-wrapper" style="display: block">
            <div class="row section-text">
                <div class="col-md-3"></div>
                <div class="col-md-6">
                    <p>
                        Here's an explanation paragraph filler
                    </p>
                </div>
                <div class="col-md-3"></div>
            </div>
            <div class="row">
                <div class="col-md-2"></div>
                <div class="col-md-8" style="text-align: center;">

                    <div class="row">

                        <div class="col-md-6">
                            <div class="btn-group btn-group-toggle" data-toggle="buttons">
                              <label class="btn btn-secondary bootstrap-button-toggle active" title="Average AV Club rating of all episodes of a series">
                                <input type="radio" name="showbar-var-select" value="average_av_rating" id="avg_rating_button" autocomplete="off" checked>AV Club Grade
                              </label>
                              <label class="btn btn-secondary bootstrap-button-toggle" title="Average rating of a series relative to the average IMDB community score">
                                <input type="radio" name="showbar-var-select" value="rating_difference" id="net_rating_button" autocomplete="off">Net Rating
                              </label>
                            </div>
                        </div>

                        <div class="col-md-6" id="show-genre-select-wrapper" style="text-align:center;">
                            <select id="show-genre-select" class="fstdropdown-select form-control genre-select">
                                <option class="genre-option" id="genre-all" value="all">All</option>
                            </select>
                        </div>

                    </div>

                    <div class="row" id="ranked-show-bar-chart"></div>
                </div>
                <div class="col-md-2"></div>
            </div>

            <div class="row">
                <div class="col-md-2"></div>
                <div class="col-md-8" id="ranked-show-chartbrush"></div>
                <div class="col-md-2"></div>
            </div>
        </div>
        <div id="seasons-wrapper" class="section-wrapper" style="display: none">
            <div class="row section-text">
                <div class="col-md-3"></div>
                <div class="col-md-6">
                    <p>
                        Here's an explanation paragraph filler
                    </p>
                </div>
                <div class="col-md-3"></div>
            </div>
            <div class="row">
                </br>
                <div class="col-md-4"></div>
                <div class="col-md-4">
                    <select id="show-select" class="fstdropdown-select form-control"></select>
                </div>
                <div class="col-md-4"></div>
            </div>
            <div class="row">
                <div class="col-md-1"></div>
                <div class="col-md-10" style="text-align:center;">
                    <div class="row" id="episodes-bar-chart"></div>
                    <div class="row" id="season-box-chart"></div>
                </div>
                <div class="col-md-1"></div>
                <!-- <div class="col-md-6">
                    <div class="row" id="season-bar-chart"></div>
                    <div class="row" id="ratings-plot"></div>
                </div> -->
            </div>
        </div>
        <div id="genres-wrapper" class="section-wrapper" style="display: none">
            <div class="row section-text">
                <div class="col-md-3"></div>
                <div class="col-md-6">
                    <p>
                        Here's an explanation paragraph filler
                    </p>
                </div>
                <div class="col-md-3"></div>
            </div>
            <div class="row">
                </br>

                <div class="row">
                    <div class="col-md-9"></div>
                    <div class="col-md-3">
                        <select id="genre-genre-select" class="fstdropdown-select form-control genre-select">
                            <option class="genre-option" id="genre-all" value="all">All</option>
                        </select>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-5" id="full-genre-plot"></div>
                    <div class="col-md-2"></div>
                    <div class="col-md-5" id="genre-show-plot"></div>
                </div>
            </div>
        </div>

        <div id="directors-wrapper" class="section-wrapper" style="display: none">
            <div class="row section-text">
                <div class="col-md-3"></div>
                <div class="col-md-6">
                    <p>
                        Here's an explanation paragraph filler
                    </p>
                </div>
                <div class="col-md-3"></div>
            </div>
            <div class="row">
                </br>
                <!-- <div class="col-md-4"></div> -->
                <div class="col-md-12" style="text-align: center;" id="full-director-plot"></div>
                <!-- <div class="col-md-2"></div> -->
            </div>
        </div>

        <div id="reviewers-wrapper" class="section-wrapper" style="display: none">
            <div class="row section-text">
                <div class="col-md-3"></div>
                <div class="col-md-6">
                    <p>
                        Here's an explanation paragraph filler
                    </p>
                </div>
                <div class="col-md-3"></div>
            </div>
            <div class="row">
                </br>
                <!-- <div class="col-md-4"></div> -->
                <div class="col-md-12" style="text-align: center; margin-left: 10px" id="reviewer-bias-plot"></div>
                <!-- <div class="col-md-2"></div> -->
            </div>
        </div>
    </div>

    <div class="spacer"></div>
    <div class="spacer"></div>
    <div class="container">
        <div class="col-md-2"></div>
        <div class="col-md-8"><hr></div>
        <div class="col-md-2"></div>
    </div>

    <div class="container footer" style="text-align:justify; max-width: 650px; font-size: 9pt;">
        <div class="row">
            <div class="col-md-2"></div>
            <div class="col-md-8">
                <p>Visualization by Sam Learner | <a href="mailto:learnersd@gmail.com"><img class="icon-img" src="/static/images/email.svg"></a> | <a href="https://twitter.com/sam_learner"><img class="icon-img" src="/static/images/twitter.svg"></a> | <a href="https://github.com/sdl60660"><img class="icon-img" src="/static/images/github.png"></a></p>
                <p>Code and data for this project lives <a href="https://github.com/sdl60660/av_club_reviews">here</a>.</p>
                <p>All AV Club Review Data was scraped from <a href="https://www.avclub.com/c/tv-review">AV Club TV Reviews</a>.
                    Data was enriched by scraping the the IMDB website for corresponding IMDB episode IDs and the using the
                    <a href="http://www.omdbapi.com/">OMDB API</a>.</p>
                <p>Last Updated: June 2020</p>
            </div>
            <div class="col-md-2"></div>
        </div>
    </div>

    <script>
  		let showIDs = {{ show_ids | safe }};
  		let genreNames = {{ genre_names | safe }};

  		showIDs.forEach(function(show) {
    		    $("#show-select").append(`<option class="show-option" id="show-${show.id}" value="${show.show_name}">${show.show_name}</option>`)
  			});

  		genreNames.forEach(function(genre) {
    		    $("#show-genre-select").append(`<option class="genre-option" id="genre-${genre}" value="${genre.toLowerCase()}">${genre}</option>`)
                $("#genre-genre-select").append(`<option class="genre-option" id="genre-${genre}" value="${genre.toLowerCase()}">${genre}</option>`)
  			});

  		{#$(".chosen-select").chosen();#}


	  // document.getElementById('candidate-select-box').addEventListener('input', function () {
	  //    if (rawCandidateList.includes($(this).val())) {
	  //       var candidateFileName = SpacesToUnderscores($(this).val());
	  //       console.log(candidateFileName);

	  //       GetCandidateData(candidateFileName, divisionLayer);
	  //     } 
  // });
  	</script>  


	<!-- External JS Libraries -->
	<script src="static/js/bootstrap.min.js"></script>
	<script src="static/js/jquery-ui.min.js"></script>
	<script src="static/js/d3.min.js"></script>
	<script src="static/js/d3-tip.js"></script>
    <script src="static/js/fstdropdown.min.js"></script>

	<!-- Custom JS -->
	<script src="static/js/utils.js"></script>
	<script src="static/js/barchart.js"></script>
	<script src="static/js/show_bars.js"></script>
	<script src="static/js/boxplot.js"></script>
	<script src="static/js/reviewer_chart.js"></script>
	<script src="static/js/bubbleplot.js"></script>
    <script src="static/js/chartbrush.js"></script>
	<script src="static/js/main.js"></script>

</body>

</html>

